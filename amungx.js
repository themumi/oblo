function startTyntLiteApp() {
String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};String.prototype.wordCount=function(){var A=this.trim();return(A?A.split(/\s+/i).length:0);};var getValuesFromUri=function(E){if(!E){return{};}var F=E.substring(E.indexOf("?")+1);var A={};var B=F.split("&");for(var C=0;C<B.length;C++){var D=B[C].split("=");A[D[0]]=D[1];}return A;};var toURI=function(D){var A=[];var C="";for(var B in D){A.push(C,B,"=",D[B]);C="&";}return A.join("");};var safeURIComponent=function(A){return encodeURIComponent(A).replace(/\'/g,"%27");};var windowSelection={};windowSelection.capture=function(){if(typeof window.getSelection!="undefined"){this.selection=window.getSelection();}else{this.selection=document.selection;}return this;};windowSelection.empty=function(){if(this.selection&&typeof this.selection.empty!="undefined"){this.selection.empty();}};Number.prototype.BASE_62_CHARACTERS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";Number.prototype.toBase62=function(){var B=62;if(this<B){return this.BASE_62_CHARACTERS.charAt(this);}else{var C=Math.floor(this/B);var A=this-C*B;if(C>=B){return C.toBase62()+this.BASE_62_CHARACTERS.charAt(A);}else{return this.BASE_62_CHARACTERS.charAt(C)+this.BASE_62_CHARACTERS.charAt(A);}}};String.prototype.times=function(C){var A="";for(var B=0;B<C;B++){A+=this;}return A;};Number.prototype.toBase62WithLength=function(C){var A=this.toBase62();var B=A.length;var D=C-B;return this.BASE_62_CHARACTERS.charAt(0).times(D)+A;};var generateGuid=function(){var A=Math.floor(Math.random()*56800235584);return A.toBase62WithLength(6);};var TraceLiteServer={};TraceLiteServer.WRITE_URL="http://wau.tynt.com";TraceLiteServer.PAGE_TRACKER_URL="http://wau.tynt.com";var userId;var threeLastSelectionStrings=[];var COPY_WITH_NO_ATTRIBUTION="1",IMAGE="3";var MAX_PACKET_SIZE=2048;var documentTitle=function(){return(document.title||window.location.hostname).trim().replace(new RegExp(window.location.hash,"g"),"");};var documentCharset=function(){return document.charset||document.characterSet;};var httpGetWithoutResponse=function(B){var A=document.createElement("img");A.src=B;A.height=0;A.width=0;if(window.addEventListener){A.addEventListener("load",function(C){(C.target||C.srcElement).parentNode.removeChild(C.target||C.srcElement);},false);A.addEventListener("error",function(C){(C.target||C.srcElement).parentNode.removeChild(C.target||C.srcElement);},false);}else{A.attachEvent("onload",function(C){(C.target||C.srcElement).parentNode.removeChild(C.target||C.srcElement);});A.attachEvent("onerror",function(C){(C.target||C.srcElement).parentNode.removeChild(C.target||C.srcElement);});}document.getElementsByTagName("body")[0].appendChild(A);A=null;};var getTracerScriptUri=function(){var A=document.getElementsByTagName("script");for(var B=0;B<A.length;B++){if(/\/tyntlite.*\?/i.test(A[B].src)){return A[B].src;}}return null;};var handleImageDragCopy=(function(B){var C;var A=function(F){var E=F.target||F.srcElement;if(E!=C){if(window.addEventListener){document.removeEventListener("dragexit",A,false);window.removeEventListener("dragleave",A,false);}else{document.getElementsByTagName("body")[0].attachEvent("ondragleave",A);}var D=true;handleTracing(C,D);}return true;};return function(D){C=D.target||D.srcElement;if(window.removeEventListener){document.removeEventListener("dragexit",A,false);window.removeEventListener("dragleave",A,false);}else{document.getElementsByTagName("body")[0].detachEvent("ondragleave",A);}if(C.nodeName=="IMG"){if(window.addEventListener){document.addEventListener("dragexit",A,false);window.addEventListener("dragleave",A,false);}else{document.getElementsByTagName("body")[0].attachEvent("ondragleave",A);}}return true;};})();var handleImageCopyThruContextMenu=(function(C){var B;var A=function(E){window.removeEventListener("blur",A,false);var D=true;handleTracing(B,D);return true;};return function(D){B=D.target||D.srcElement;window.removeEventListener("blur",A,false);if(B.nodeName=="IMG"&&B.parentNode.nodeName!="A"){window.addEventListener("blur",A,false);window.setTimeout(function(){document.removeEventListener("blur",A,false);},10000);}return true;};})();var eventHandler=function(B){var C=B.target||B.srcElement||sel.selection.getRangeAt(0).startContainer;var A=(B.type=="copy");handleTracing(C,A);};var startListeningForTraces=function(){if(window.addEventListener){if(!window.navigator.userAgent.match("Firefox/2")){document.getElementsByTagName("body")[0].addEventListener("copy",eventHandler,false);}document.addEventListener("mouseup",eventHandler,false);document.addEventListener("mousedown",handleImageDragCopy,false);document.addEventListener("contextmenu",handleImageCopyThruContextMenu,false);}else{document.getElementsByTagName("body")[0].attachEvent("oncopy",eventHandler);document.getElementsByTagName("body")[0].attachEvent("onmouseup",eventHandler);document.getElementsByTagName("body")[0].attachEvent("onmousedown",handleImageDragCopy);}};var selectionStringIsNew=function(B){if(B==null||B.trim().length==0){return false;}for(var A=threeLastSelectionStrings.length-1;A>=0;A--){if(threeLastSelectionStrings[A]==B){return false;}}threeLastSelectionStrings.unshift(B);if(threeLastSelectionStrings.length>3){threeLastSelectionStrings.pop();}return true;};var setupChunkedData=function(C){var A=[];A.push(["_charset_",documentCharset()],["site_guid",C.site_guid],["name",safeURIComponent(C.name.substr(0,255))],["word_count",C.word_count.toString()],["trace_type",C.trace_type],["url",C.url],["content",safeURIComponent(C.content)]);for(var B=A.length-1;B>=0;B--){if(typeof A[B][1]==="undefined"||(typeof A[B][1]==="string"&&A[B][1].length==0)){A.splice(B,1);}}return A;};var buildPackets=function(Q){var C=setupChunkedData(Q);var I=[];var J="packet=&".length+12;var O=(TraceLiteServer.WRITE_URL+"/tr?").length;var L=generateGuid();var B="wg=&".length+6;var D=O+J+B;var H=MAX_PACKET_SIZE-D;var F=C.length;var P=0;var A,K,R,G,N,E;K=0;A=0;var M=0;I[M]={total:null,wg:L};while(P<F){R=C[P][0];N=R.length+2;G=H-N-A;if(G>0){I[M][R]=C[P][1].substr(K,G);E=I[M][R].slice(-2).indexOf("%");if(E>-1){I[M][R]=C[P][1].substr(K,G-2+E);A+=E+2;}A+=I[M][R].length+N;K+=I[M][R].length;}else{A=H;}if(A>=H){I[++M]={packet:M,wg:L};A=0;}if(K>=C[P][1].length){P++;K=0;}}I[0].total=I.length;return I;};var handleTracing=(function(){var D;var C=null;var B=function(){C=(typeof D.selection.toString!="undefined")?D.selection.toString():document.selection.createRange().text;};var E=function(G){var H=buildPackets(G);httpGetWithoutResponse(TraceLiteServer.WRITE_URL+"/tr?"+toURI(H[0]));for(var F=1;F<H.length;F++){httpGetWithoutResponse(TraceLiteServer.WRITE_URL+"/x?"+toURI(H[F]));}};var A=function(F){if(selectionStringIsNew(C)){var G={url:window.location.href.replace(/#ixzz=?.*$/,""),site_guid:userId,word_count:C.wordCount(),name:documentTitle(),trace_type:F,content:C};E(G);}};return function(G,F){D=windowSelection.capture();var H=G.src;if(H&&F){C=H;A(IMAGE);}else{if(F&&C){A(COPY_WITH_NO_ATTRIBUTION);}else{if(F){B();A(COPY_WITH_NO_ATTRIBUTION);}else{B();}}}return true;};})();var scriptValues=getValuesFromUri(getTracerScriptUri());userId=scriptValues.user;startListeningForTraces();}
function tyntLitedocumentIsReady() {
    var html = document.getElementsByTagName('html')[0];
    return !(!html || !document.getElementsByTagName('body')[0] || !html.innerHTML || html.innerHTML.toLowerCase().indexOf('</body>') == -1 || (typeof document.readyState == 'string' && document.readyState != 'complete')); // Overly cautious
}

function tyntLiteLoader() {
    window.setTimeout(tyntLitedocumentIsReady() ? startTyntLiteApp : tyntLiteLoader, 300);
}

tyntLiteLoader();
